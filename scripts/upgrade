#!/bin/bash

echo "ℹ️  Brew"
brew update
brew upgrade
brew upgrade --cask
brew cleanup -s

echo "ℹ️  Brew diagnostic"
brew doctor
brew missing

echo "ℹ️  Mas upgrade"
mas outdated
mas upgrade

echo "ℹ️  Pnpm upgrade"
if command -v pnpm &> /dev/null; then
  pnpm update -g
else
  if command -v volta &> /dev/null; then
    echo "  Installing pnpm via Volta..."
    volta install pnpm@latest 2>&1 || true
    
    if command -v pnpm &> /dev/null; then
      pnpm update -g
    else
      echo "  Warning: pnpm installation failed, skipping npm/pnpm package updates"
    fi
  else
    echo "  Warning: pnpm not found and Volta is not available, skipping npm/pnpm package updates"
  fi
fi
